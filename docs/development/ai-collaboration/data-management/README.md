# AI開発データ管理ガイドライン

## 結論（要点）

**AIチャットの生ログを大量にGitHubリポジトリへ直置きするのは原則おすすめしません**。理由は、有料プランでもGitの根本制限（1ファイル100MB上限、リポジトリ肥大によるクローン遅延等）は変わらないためです。

**推奨アプローチ**: 「要約をGitHubに、重い生ログは専用ストレージへ」の**二層構成**

## 概要

Media Viewer v209開発では、AI（ClaudeCode）との協業により大量のチャットログ・作業履歴・分析データが生成されます。これらのデータを適切に分類・保存・管理するためのガイドラインを提供します。

## 背景と課題

### 従来の開発との違い
- **従来**: コード中心でGitの履歴・差分機能が有効
- **AI開発**: チャットログ（Markdown/JSON）が肥大化しやすく、Gitの得意領域を超えやすい

### Git/GitHubの制限事項
- **ファイル制限**: 100MB超はpushブロック、50MB超で警告
- **リポジトリ制限**: 数GB超で運用が重く、クローンやCIが遅延
- **有料プラン**: Git自体の制限は緩められない

## データ分類と保存戦略

### 🟢 GitHub保存推奨データ
| データタイプ | 保存先 | 理由 |
|------------|-------|------|
| 意思決定記録（ADR） | `docs/adr/` | 履歴管理・検索性が重要 |
| 要約・サマリー | Issues/PR/Wiki | コードとの連携・レビュー機能 |
| 最終成果物 | リポジトリ本体 | バージョン管理が必須 |
| 設定ファイル | `.github/`, `configs/` | 自動化・再現性確保 |

### 🟡 条件付きGitHub保存
| データタイプ | 保存方法 | 制限・条件 |
|------------|----------|-----------|
| 重要ログアーカイブ | Git LFS | 月数GB〜十数GB規模まで |
| リリース固有データ | Releases添付 | スナップショット用途 |
| CI生成物 | Actions Artifacts | 90日間の短期保管 |

### 🔴 GitHub保存非推奨データ
| データタイプ | 代替保存先 | 理由 |
|------------|-----------|------|
| 完全チャットログ | ローカル/外部ストレージ | 容量制限・差分管理不要 |
| 大容量メディア | 外部ストレージ | Git制限回避 |
| 機密情報含有データ | 専用ストレージ | セキュリティ要件 |

## 文書構成

### 📋 [GitHubストレージポリシー](github-storage-policy.md)
- GitHub保存データの明確な基準
- Git LFS使用ガイドライン
- リポジトリ肥大化防止策

### 💾 [ローカルストレージガイドライン](local-storage-guidelines.md) **（暫定措置）**
- ローカルディレクトリ構造の標準化
- AIチャットログ・作業履歴の保存形式
- アクセス方法・検索性確保手順

### 📊 [データ分類マトリックス](data-classification-matrix.md)
- 保存先判定の明確な基準表
- データタイプ別の詳細方針
- 保存期間・ライフサイクル管理

### ☁️ [外部ストレージ戦略](external-storage-strategy.md) **（将来計画）**
- S3等への移行計画
- コスト比較・技術選定基準
- 移行手順・タイムライン

## クイックスタート

### 新規開発者向け
1. [データ分類マトリックス](data-classification-matrix.md)で保存先を判定
2. [ローカルストレージガイドライン](local-storage-guidelines.md)でローカル保存を設定
3. [GitHubストレージポリシー](github-storage-policy.md)でリポジトリ保存ルールを確認

### AI開発者（ClaudeCode等）向け
1. チャットログは自動的にローカル保存
2. 要約・決定事項のみGitHub保存
3. 機密情報の自動マスキング実行

## 推奨アーキテクチャ

### 二層構成の実装
```
GitHub Repository (軽量維持)
├── 要約・決定記録
├── コード・設定ファイル  
└── 外部データへのリンク・インデックス

External Storage (大容量対応)
├── 完全チャットログ
├── 作業履歴・分析結果
└── アーカイブデータ
```

### 運用フロー
```
1. AI作業実行
   ↓
2. 生ログをローカル/外部に保存
   ↓
3. 要約を自動生成
   ↓
4. 要約をGitHub（PR/Issue）に記録
   ↓
5. 外部ログへのリンク付与
```

## コスト比較（年間100GB想定）

| 保存方法 | 月額コスト概算 | メリット | デメリット |
|---------|-------------|---------|----------|
| Git LFS | ~$10 | GitHub内完結 | アクセス時に重い |
| S3 Standard | ~$2.3 | 安価・スケーラブル | GitHub外部管理 |
| ローカル保存 | $0 | 無料・高速 | 共有・バックアップ課題 |

## セキュリティ・コンプライアンス

### 必須対策
- [ ] 機密情報の自動マスキング（APIキー、個人情報等）
- [ ] アクセス制御（SSO + 最小権限）
- [ ] 監査ログの保存
- [ ] 定期的なデータ棚卸し

### 推奨対策
- [ ] GitHub Advanced Security（Secret Scanning）
- [ ] DLPルールの設定
- [ ] 暗号化保存
- [ ] バックアップ・復旧手順の確立

## メトリクス・効果測定

### 追跡指標
- **容量効率**: リポジトリサイズの推移
- **パフォーマンス**: クローン・CI時間の変化
- **コスト**: ストレージ・帯域の月額費用
- **利用効率**: データアクセス頻度・検索成功率

### 月次レビュー項目
- データ分類基準の妥当性確認
- 保存先配分の最適化
- コスト・パフォーマンス分析
- セキュリティ対策の有効性評価

## 継続改善

### 四半期見直し項目
1. **技術動向**: GitHub新機能・外部ストレージ進化の反映
2. **運用効率**: 自動化範囲の拡大・手作業削減
3. **コスト最適化**: より安価・効率的な保存方法の検討
4. **セキュリティ**: 新たな脅威・規制への対応

### アップグレードパス
```
Phase 1: ローカル保存中心（現在）
    ↓
Phase 2: ハイブリッド運用（GitHub + S3）
    ↓  
Phase 3: 完全自動化・最適化
```

## 関連文書

- [AI協業プロジェクト管理ガイドライン](../README.md) - 上位ガイドライン
- [GitHub連携機能マトリックス](../github-integration-capabilities.md) - 技術的制約
- [プロジェクト管理ワークフロー](../project-management-workflow.md) - 運用フロー

## 更新履歴

| 日付 | 更新内容 | 更新者 |
|------|----------|---------|
| 2025-08-13 | 初版作成、基本方針確立 | ClaudeCode |

---

**注意**: このガイドラインは実運用の結果に基づいて継続的に改善されます。新たなデータタイプや保存要件が発生した場合は、適切な分類と保存方針を追加してください。