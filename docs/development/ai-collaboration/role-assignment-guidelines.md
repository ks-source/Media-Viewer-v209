# 人間-AI役割分担指針

## 概要

Media Viewer v209開発における人間（開発者・プロジェクトマネージャー）とAI（ClaudeCode）の最適な役割分担を定義します。この指針により、効率的で品質の高い協業を実現し、それぞれの強みを最大限に活用します。

## 基本方針

### 🤝 協業の原則
1. **補完関係**: 人間とAIは競争ではなく協力関係
2. **透明性**: すべての作業と意思決定を相互に可視化
3. **継続学習**: 双方が経験を通じて改善を続ける
4. **責任の明確化**: 各段階での責任者を明確に定義

### 🎯 目標設定
- **効率性**: 作業の重複を避け、最短経路での目標達成
- **品質**: 人間の創造性とAIの一貫性を組み合わせた高品質な成果
- **安全性**: 重要な判断には人間のチェックを必須とする
- **学習**: 相互のフィードバックによる継続的改善

## 詳細役割分担

### 🤖 AI（ClaudeCode）の主担当領域

#### ✅ 完全自動化可能
| 作業カテゴリ | 具体的な作業 | 判断レベル | 人間承認 |
|------------|------------|----------|---------|
| **タスク管理** | Issue作成・ラベル付け・Project追加 | 定型的 | 不要 |
| **進捗監視** | ステータス更新・期限チェック・レポート生成 | ルールベース | 不要 |
| **文書作成** | API文書・設計書・手順書の初稿 | 標準化 | レビュー必要 |
| **コード生成** | ボイラープレート・設定ファイル・テストケース | 定型的 | レビュー必要 |
| **品質チェック** | 文法確認・一貫性チェック・リンク検証 | 機械的 | 不要 |

#### 🔄 半自動化（人間確認後実行）
| 作業カテゴリ | 具体的な作業 | 判断レベル | 人間承認 |
|------------|------------|----------|---------|
| **技術実装** | 新機能のコード実装・リファクタリング | 中程度 | 必須 |
| **設計決定** | API設計・データ構造・アルゴリズム選択 | 高度 | 必須 |
| **文書更新** | 仕様変更に伴う関連文書の一括更新 | 影響大 | 必須 |
| **デプロイ** | ビルド・テスト実行・リリース準備 | 影響大 | 必須 |

#### 📋 提案・推奨レベル
| 作業カテゴリ | 具体的な作業 | 判断レベル | 人間承認 |
|------------|------------|----------|---------|
| **アーキテクチャ** | システム構成・技術スタック選択 | 戦略的 | 必須 |
| **スケジューリング** | マイルストーン設定・リソース配分 | 事業的 | 必須 |
| **外部連携** | API選択・ライブラリ導入・外部サービス利用 | リスク高 | 必須 |

### 👥 人間の主担当領域

#### ✅ 人間が主導（AIサポート）
| 作業カテゴリ | 具体的な作業 | AI支援内容 | AIの役割 |
|------------|------------|-----------|---------|
| **戦略決定** | プロダクト方向性・機能優先度 | 市場調査・データ分析 | アドバイザー |
| **要件定義** | ユーザーストーリー・受入基準 | 要件整理・一貫性チェック | アシスタント |
| **創造的設計** | UI/UX・ユーザー体験設計 | プロトタイプ作成・代替案提示 | ツール |
| **ステークホルダー管理** | 顧客対応・チーム調整 | 資料作成・議事録整理 | サポート |

#### ⚖️ 人間が最終承認（AI実装）
| 作業カテゴリ | 具体的な作業 | AI実装内容 | 承認基準 |
|------------|------------|-----------|---------|
| **コードレビュー** | Pull Request承認 | 自動チェック・問題点指摘 | 品質・セキュリティ |
| **リリース判定** | 本番環境への展開 | テスト結果・影響分析 | ビジネス影響 |
| **緊急対応** | 障害対応・回復作業 | 原因分析・対策案作成 | リスク評価 |

#### 🛡️ 人間専用（AI立入禁止）
| 作業カテゴリ | 理由 | AIの制限 |
|------------|-----|---------|
| **セキュリティ設定** | 機密情報・権限管理 | アクセス権なし |
| **法的判断** | ライセンス・コンプライアンス | 責任を負えない |
| **最終意思決定** | 事業戦略・投資判断 | 権限なし |

## 実務での協業パターン

### パターン1: 新機能開発

```
[人間] 要件定義・優先度設定
   ↓
[AI] 技術調査・実装計画作成
   ↓
[人間] 計画レビュー・承認
   ↓
[AI] コード実装・テスト作成
   ↓
[人間] コードレビュー・品質確認
   ↓
[AI] 修正・文書更新
   ↓
[人間] 最終承認・リリース判定
```

### パターン2: バグ修正

```
[人間] バグ報告・影響度評価
   ↓
[AI] 原因調査・修正案作成
   ↓
[人間] 修正方針レビュー
   ↓
[AI] 実装・テスト・影響範囲確認
   ↓
[人間] 修正内容確認・承認
   ↓
[AI] デプロイ準備・関連文書更新
```

### パターン3: ドキュメント整備

```
[AI] 既存文書の一貫性チェック
   ↓
[人間] 更新方針・優先度決定
   ↓
[AI] 文書作成・関連情報収集
   ↓
[人間] 内容確認・技術的正確性検証
   ↓
[AI] 修正・フォーマット統一
   ↓
[人間] 最終承認・公開判定
```

## 意思決定マトリックス

### 影響度別の承認フロー

#### 🟢 低影響（AI単独判断可）
- **対象**: 文書修正・ラベル更新・定型作業
- **承認**: 不要
- **事後報告**: 日次レポートに含める

#### 🟡 中影響（AI提案→人間承認）
- **対象**: 機能追加・設計変更・外部ツール導入
- **承認**: 24時間以内
- **方法**: GitHub Issue での明示的な承認

#### 🔴 高影響（人間主導）
- **対象**: アーキテクチャ変更・セキュリティ関連・本番環境操作
- **承認**: 必須（複数人での確認推奨）
- **方法**: 会議・詳細レビュー・段階的実施

### 判断基準

```yaml
影響度評価:
  技術的複雑度:
    低: 既存パターンの適用・設定変更
    中: 新規実装・APIインターフェース変更  
    高: アーキテクチャ変更・外部依存追加
  
  ビジネス影響:
    低: 内部品質・開発効率の改善
    中: 機能追加・ユーザー体験の向上
    高: 収益・セキュリティ・法的コンプライアンス
  
  リスク評価:
    低: 失敗時も簡単に戻せる変更
    中: 部分的影響・復旧に工数が必要
    高: システム全体に影響・復旧困難
```

## コミュニケーション規約

### 🚀 日常的なやり取り

#### AIからの報告タイミング
- **即座**: エラー・ブロッカー発生時
- **日次**: 進捗レポート・完了タスク一覧
- **週次**: 全体状況・メトリクス・改善提案

#### 人間からのフィードバック
- **承認**: 明示的な「承認」「OK」のコメント
- **修正指示**: 具体的な修正内容・理由
- **質問**: 不明点・懸念事項の明確化

### 📝 文書化ルール

#### AIが作成する文書
```markdown
## [AI Generated] 文書タイトル
**作成者**: ClaudeCode
**作成日**: 2025-08-13
**レビュー状態**: 初稿・レビュー中・承認済み

### 人間レビュー必要箇所
- [ ] 技術仕様の正確性確認
- [ ] ビジネス要件との整合性
- [ ] セキュリティ考慮事項

### 自動チェック完了項目
- [x] 文法・スペルチェック
- [x] リンク有効性確認
- [x] フォーマット統一
```

#### 人間が確認する観点
1. **技術的正確性**: 実装可能性・パフォーマンス影響
2. **ビジネス整合性**: 要件との一致・優先度の妥当性
3. **セキュリティ**: 脆弱性・機密情報の考慮
4. **保守性**: 長期的な運用・拡張性

## エスカレーション・例外処理

### 🚨 緊急時の対応

#### AIが検出する緊急事態
- セキュリティ脆弱性の発見
- システム障害の兆候
- 重要なデッドラインの遅延リスク
- 外部依存の重大な変更

#### 緊急時の連絡フロー
```bash
# 緊急Issue作成テンプレート
gh issue create --repo ks-source/Media-Viewer-v209 \
  --title "🚨 [緊急] $(date '+%H:%M') - 概要" \
  --body "## 緊急度: CRITICAL

### 発生事象
具体的な問題の説明

### 影響範囲  
- システム: 影響を受ける機能
- ユーザー: 影響を受ける範囲
- タイムライン: 対応期限

### 推奨アクション
1. 即座に実施すべき対策
2. 追加で検討すべき対策  
3. 中長期的な改善策

### AI判断の限界
人間の判断が必要な理由・観点" \
  --label "emergency,priority-critical" \
  --assignee "human-pm"
```

### 🤔 判断困難な状況

#### AIが人間の判断を求める場合
- 複数の技術選択肢で甲乙つけがたい場合
- ビジネス要件が曖昧・矛盾している場合
- セキュリティとユーザビリティのトレードオフ
- 外部制約（法的・契約的）の考慮が必要

#### 判断依頼のフォーマット
```markdown
## 🤔 人間の判断が必要

### 状況説明
現在の状況と判断が必要な理由

### 選択肢
1. **選択肢A**
   - メリット: ...
   - デメリット: ...
   - リスク: ...
   
2. **選択肢B**
   - メリット: ...
   - デメリット: ...
   - リスク: ...

### AI の分析結果
技術的な観点からの分析

### 人間判断が必要な観点
- ビジネス影響の評価
- 長期的な戦略との整合性
- ステークホルダーへの影響

### 判断期限
YYYY-MM-DD HH:MM まで（理由: ...）
```

## 品質保証・相互チェック

### 🔍 AIによる品質チェック項目

#### コード品質
- [ ] 構文エラー・警告の解消
- [ ] コーディング規約の遵守
- [ ] 適切なコメント・文書化
- [ ] セキュリティベストプラクティス
- [ ] パフォーマンス考慮事項

#### 文書品質
- [ ] 誤字・脱字・文法チェック
- [ ] リンクの有効性確認
- [ ] 情報の一貫性・正確性
- [ ] フォーマット・構造の統一
- [ ] 更新日時・バージョン情報

### 👀 人間によるレビュー観点

#### 戦略的観点
- ビジネス要件との整合性
- ユーザー体験への影響
- 競合優位性・差別化要因
- 将来の拡張性・柔軟性

#### 運用観点
- 実装・運用コストの妥当性
- 保守・サポートの容易性
- 障害対応・回復手順
- チーム・組織への影響

## 学習・改善メカニズム

### 📊 定期的な振り返り

#### 週次レビュー
- 協業の効率性・品質評価
- コミュニケーションの改善点
- ツール・プロセスの最適化
- 次週の重点項目設定

#### 月次アセスメント
- 役割分担の妥当性見直し
- 新しい協業パターンの模索
- スキル・能力の相互評価
- 長期的な改善計画策定

### 🎯 相互フィードバック

#### 人間→AIフィードバック
```markdown
## ClaudeCodeへのフィードバック

### 良かった点
- 迅速で正確な文書作成
- 一貫性のある品質管理
- プロアクティブな問題発見

### 改善点
- より詳細な技術説明が欲しい
- ビジネス要件の理解を深めて欲しい
- 代替案の提示を充実させて欲しい

### 具体的な改善提案
1. ...
2. ...
3. ...
```

#### AI→人間フィードバック
```markdown
## 人間の協業者へのフィードバック

### 協業しやすかった点
- 明確で具体的な指示
- 迅速なレビューとフィードバック  
- 建設的な改善提案

### より効果的な協業のための提案
- 要件の背景・理由の共有
- 優先度の明確化
- 中間確認のタイミング設定
```

## 関連文書・ツール

### 📚 関連文書
- [GitHub連携機能マトリックス](github-integration-capabilities.md) - AI の技術的能力
- [プロジェクト管理ワークフロー](project-management-workflow.md) - 具体的な作業手順
- [開発標準](../standards.md) - 品質基準・規約

### 🛠️ 使用ツール
- **GitHub Projects**: タスク管理・進捗可視化
- **GitHub CLI**: 自動化・スクリプト実行
- **ClaudeCode**: AI開発アシスタント
- **Git**: バージョン管理・履歴追跡

---

**注意**: この役割分担指針は、実際の協業を通じて継続的に改善されます。新しい協業パターンの発見や、より効果的な分担方法があれば、随時更新していきます。